* Improve the algorithm in `agree_on_height`. It now starts looking near the top, and
  it keeps the right top hash during the whole algorithm.
